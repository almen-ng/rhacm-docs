[#troubleshooting-cluster-proxy-addon-ignoring-addon-toleration]
= Troubleshooting the cluster proxy add-on ignoring the add-on toleration

After you configure the add-on toleration, then by default, the cluster-proxy add-ons should run on your managed clusters and use the new add-on toleration. For unknown reasons, the cluster-proxy add-ons might not use your add-on toleration. In this case, they ignore the toleration changes and run on a compute node. Running on a compute node could affect costs and add loads on the infra and master nodes, making these nodes less charged. If your cluster-proxy add-ons do not automatically use your add-on toleration, complete the following steps: 

. To ensure your configuration for the add-on toleration gets pushed to your managed cluster, create a  `cluster-proxy add-on supportconfig` by using the following template: 
+
[source,bash]
----
apiVersion: addon.open-cluster-management.io/v1alpha1
kind: ClusterManagementAddOn
metadata:
  name: cluster-proxy
spec:
  addOnMeta:
    description: cluster-proxy
    displayName: cluster-proxy
  installStrategy:
    type: Manual
  supportedConfigs:
  - group: proxy.open-cluster-management.io
    resource: managedproxyconfigurations
    defaultConfig:
      name: cluster-proxy
  - defaultConfig:
      name: klusterlet-addon-deploy-config
      namespace: open-cluster-management-hub
    group: addon.open-cluster-management.io
    resource: addondeploymentconfigs
----


. To ensure the pods, such as the cluster-proxy-proxy-agent, on your managed cluster gets configured with the add-on toleration, verify that your `ClusterManagementAddon` looks like the following sample: 
+
[source,bash]
----
apiVersion: addon.open-cluster-management.io/v1alpha1
kind: ClusterManagementAddOn
metadata:
  name: cluster-proxy
spec:
  addOnMeta:
    description: cluster-proxy
    displayName: cluster-proxy
  installStrategy:
    type: Manual
  supportedConfigs:
  - group: proxy.open-cluster-management.io
    resource: managedproxyconfigurations
    defaultConfig:
      name: cluster-proxy
  - defaultConfig:
      name: klusterlet-addon-deploy-config
      namespace: open-cluster-management-hub
    group: addon.open-cluster-management.io
    resource: addondeploymentconfigs
----
